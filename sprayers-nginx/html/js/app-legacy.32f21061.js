(function(){"use strict";var t={7103:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var i=n(144),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",on:{scroll:function(e){return t.handleScroll(e)}}},[n("sprayers-header"),n("sprayers-main")],1)},a=[],o=n(3019),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"main-content"},[n("router-view")],1)])},u=[],c={name:"SprayersMain",data:function(){return{title_Group:"Group",title_HotTop:"Hot Top",groups:[{name:"china",id:"china"},{name:"guangdong",id:"guangdong"},{name:"zhuhai",id:"zhuhai"},{name:"nfh",id:"nfh"}],hotTops:[{name:"今天核酸了嘛",id:"1"},{name:"今天核酸了嘛",id:"1"},{name:"今天核酸了嘛",id:"1"}]}}},l=c,m=n(1001),d=(0,m.Z)(l,r,u,!1,null,null,null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"contains header-contains"},[t._m(0),n("div",{staticClass:"contains-right"},[n("div",{staticClass:"menu"},t._l(t.menuRouter,(function(e,i){return n("router-link",{key:i,staticClass:"menu-item",attrs:{to:e.to}},[n("div",[t._v(t._s(e.name))])])})),1)])])])},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contains-left"},[n("img",{attrs:{src:"sprayers.png"}})])}],g={name:"SprayersHeader",data:function(){return{menuRouter:[{name:"Home🏡",to:"/"}]}}},y=g,v=(0,m.Z)(y,p,h,!1,null,null,null),_=v.exports,C=n(629),b={name:"App",components:{SprayersMain:f,SprayersHeader:_},computed:(0,o.Z)({},(0,C.rn)({sprayersData:function(t){return t.content.sprayersData}})),data:function(){return{loadData:!0}},methods:(0,o.Z)((0,o.Z)({},(0,C.nv)({getContentList:"content/getContentList"})),{},{handleScroll:function(t){var e=this,n=t.target,i=n.scrollTop,s=n.clientHeight,a=n.scrollHeight;if(i+s>.9*a&&this.loadData){this.loadData=!1;var o=this.sprayersData[this.sprayersData.length-1];this.getContentList(o._id).then((function(t){t&&(e.loadData=!0)}))}}})},x=b,k=(0,m.Z)(x,s,a,!1,null,null,null),w=k.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-home"},[n("div",{staticClass:"content-basic home-top"},[n("sprayers-text-area",{attrs:{submitType:"home"}})],1),t._l(t.sprayersData,(function(t,e){return n("sprayers-box",{key:e,attrs:{sprayersData:t}})}))],2)},L=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic home-textArea"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{maxlength:t.maxLengthLimit},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},function(e){return t.textMsg()}],change:function(e){return t.textMsg()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?t.submitContent():null}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadFiles.length>0,expression:"uploadFiles.length > 0"}],staticClass:"home-img"},t._l(t.uploadFiles,(function(e,i){return n("div",{key:i,staticClass:"img"},[n("img",{staticClass:"img-bottom",attrs:{src:e.data}}),n("img",{staticClass:"imgs-top",attrs:{src:"del.png"},on:{click:function(e){return t.delImg(i)}}})])})),0),n("div",{staticClass:"home-bottom"},["home"==t.submitType?n("div",{staticClass:"home-tool"},[n("div",{staticClass:"tool-btn"},[n("div",{on:{click:function(e){return t.isShowEmoji()}}},[t._v("😃")]),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],on:{select:t.selectEmoji}})],1),n("div",{staticClass:"tool-btn"},[n("input",{staticClass:"input-file",attrs:{type:"file",accept:"image/*",multiple:"true"},on:{change:function(e){return t.getFiles(e)}}}),t._v(" 📷 ")])]):t._e(),"home"!=t.submitType?n("div",{staticClass:"home-tool"},[n("div",{staticClass:"tool-btn"},[n("div",{on:{click:function(e){return t.isShowEmoji()}}},[t._v("😃")]),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],on:{select:t.selectEmoji}})],1)]):t._e(),n("div",{staticClass:"home-send"},[n("div",[t._v(" "+t._s(t.maxlength)+"/120")]),n("button",{staticClass:"comment-btn",attrs:{type:"button"},on:{click:function(e){return t.submitContent()}}},[t._v("🗣")])])])])},D=[],j=(n(561),n(8309),n(3210),{name:"SprayersTextArea",props:{submitType:{type:String,default:""},id:{type:String,default:""}},data:function(){return{message:"",text:"",isEmoji:!1,uploadFiles:[],maxlength:0,maxLengthLimit:120,picturesLengthLimit:9,picturesErrorMsg:"Pictures more than 9",messageErrorMsg:"Message more than 120",picturesSizeLimitErrorMsg:"Pictures more than 10m",uploadSizeLimit:10240}},computed:{isUploadOverSizeLimit:function(){var t,e=!1,n=0,i=this.uploadFiles;for(t in i){var s=i[t];null!=s&&(n+=s.size)}return this.uploadSizeLimit<=n&&(e=!0),e}},methods:(0,o.Z)((0,o.Z)((0,o.Z)({},(0,C.nv)({submitContentActions:"content/submitContent",getContentList:"content/getContentList",getContentByParentId:"content/getContentByParentId"})),(0,C.OI)({addContentList:"content/addContentList",addCommentById:"content/addCommentById"})),{},{delImg:function(t){this.uploadFiles.splice(t,1)},selectEmoji:function(t){this.message+=t.data,this.isEmoji=!1,this.textMsg()},isShowEmoji:function(){return this.isEmoji?this.isEmoji=!1:this.isEmoji=!0,this.isEmoji},getFiles:function(t){var e,n=this,i=t.target.files,s=function(){var t=i[e];a=new FileReader,a.readAsDataURL(t);var s="",o=n;a.onload=function(){s=this.result.substring(this.result.indexOf(",")+1);var e={name:t.name,data:"data:image/png;base64,"+s};o.uploadFiles.push(e)}};for(e in i){var a;s()}},textMsg:function(){this.maxlength=this.message.length},submitContent:function(){var t=this.message.trim();if(console.log(t),t.length<=0)alert("Message is Empty");else if(this.message.length>this.maxLengthLimit)alert(this.messageErrorMsg);else if(this.uploadFiles.length>this.picturesLengthLimit)alert(this.picturesErrorMsg);else if(this.isUploadOverSizeLimit)alert(this.picturesSizeLimitErrorMsg);else{var e={content:this.message,imgs:this.uploadFiles,parentId:this.id,createDate:new Date},n=this;this.submitContentActions(e).then((function(t){t&&(n.id.length>0?n.getContentByParentId(n.id):n.getContentList(),n.message="",n.uploadFiles=[])}))}}})}),I=j,P=(0,m.Z)(I,E,D,!1,null,null,null),Z=P.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic box"},[n("div",{staticClass:"box-content"},[n("p",{staticClass:"content-date"},[t._v(" "+t._s(t._f("dateFormat_y_m_d_hm")(t.sprayersData.createDate))+" ")]),n("p",{staticClass:"content-text"},[t._v(" "+t._s(t.sprayersData.content)+" ")]),n("div",{staticClass:"content-img"},[n("viewer",t._l(t.sprayersData.imgs,(function(t,e){return n("img",{key:e,attrs:{src:t.data}})})),0)],1)]),n("sprayers-comment",{attrs:{id:t.sprayersData._id}})],1)},T=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic"},[n("div",{staticClass:"box-bottom"},[n("div",{class:["bottom-btn","Comment"===t.active?"active":""],on:{click:function(e){return t.isShowComment()}}},[t._v("⌨️ "+t._s(t.countComment))]),n("div",{staticClass:"bottom-btn",on:{click:function(e){return t.likeToSubmit(t.id)}}},[t._v("👍 "+t._s(t.countLike))])]),t.showComment?n("div",{staticClass:"box-comment"},[n("sprayers-text-area",{attrs:{submitType:"Comment"===t.active?"Transmit":"Comment",id:t.id}}),n("div",{staticClass:"comment-list"},t._l(t.sprayersComment[t.id],(function(e,i){return n("p",{key:i,staticClass:"content-list"},[t._v(" "+t._s(t._f("dateFormat_y_m_d_hm")(e.createDate))+": "+t._s(e.content)+" ")])})),0)],1):t._e()])},O=[],F={components:{SprayersTextArea:Z},name:"SprayersComment",props:{id:{type:String,default:""}},computed:(0,o.Z)({},(0,C.rn)({sprayersComment:function(t){return t.content.sprayersComment}})),data:function(){return{sprayersData:[],showComment:!1,active:"",countComment:0,countLike:0}},created:function(){var t=this;this.countCommentByParentId(this.id).then((function(e){t.countComment=e.data})),this.getLike(this.id).then((function(e){t.countLike=e.data}))},methods:(0,o.Z)((0,o.Z)({},(0,C.nv)({getContentByParentId:"content/getContentByParentId",countCommentByParentId:"content/countCommentByParentId",likeSubmit:"content/likeSubmit",getLike:"content/getLike"})),{},{isShowComment:function(){return this.active="Comment",this.showComment?(this.active="",this.showComment=!1):(this.id.length>0&&this.getContentByParentId(this.id),this.showComment=!0),this.showComment},likeToSubmit:function(t){++this.countLike,this.likeSubmit(t)}})},$=F,z=(0,m.Z)($,M,O,!1,null,null,null),H=z.exports,A={components:{SprayersComment:H},name:"SprayersBox",props:["sprayersData"],methods:{toInfo:function(t){this.$router.push({name:"info",params:{sprayersData:t},query:{id:t._id}})}}},N=A,R=(0,m.Z)(N,B,T,!1,null,null,null),U=R.exports,q={name:"ContentHome",components:{SprayersTextArea:Z,SprayersBox:U},computed:(0,o.Z)({},(0,C.rn)({sprayersData:function(t){return t.content.sprayersData}})),data:function(){return{}}},G=q,V=(0,m.Z)(G,S,L,!1,null,null,null),K=V.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic"},[n("div",{staticClass:"content-info"},[n("div",{staticClass:"box-content",on:{click:function(e){return t.toInfo()}}},[n("p",{staticClass:"content-text"},[t._v(" "+t._s(t.infoData.content)+" ")]),n("div",{staticClass:"content-img"},[n("viewer",t._l(t.infoData.imgs,(function(t,e){return n("img",{key:e,attrs:{src:t.data}})})),0)],1)])]),n("sprayers-comment",{attrs:{sprayersInfo:t.infoData.info}}),t._l(t.sprayersData,(function(e,i){return n("p",{key:i,staticClass:"content-list"},[t._v(" "+t._s(e.content)+" ")])}))],2)},J=[],Q={components:{SprayersComment:H},name:"ContentInfo",data:function(){return{infoData:this.$route.params.sprayersData,id:this.$route.query.id,sprayersData:[{name:"nick name",date:"Today 23:37",content:"sdfwe"},{name:"nick name",date:"Today 23:37",content:"fskfjkasjfdsajdflkjsdlf"}]}},methods:(0,o.Z)({},(0,C.nv)({getContentById:"content/getContentById"}))},W=Q,X=(0,m.Z)(W,Y,J,!1,null,null,null),tt=X.exports,et=n(8345);i["default"].use(et.Z);var nt=[{path:"/",name:"home",component:K},{path:"/info",name:"info",component:tt}],it=new et.Z({routes:nt}),st=it,at=n(9784),ot=n(5273),rt=n.n(ot),ut=n(9669),ct=n.n(ut),lt=n(2346),mt=(n(2222),{get_content_list:function(t){return null==t&&(t=""),i["default"].axios.get("/api/?id="+t)},submit_content:function(t){return i["default"].axios.post("/api/submit",t)},get_content_by_id:function(t){return i["default"].axios.get("/api/get?id="+t)},get_content_by_parent_id:function(t){return i["default"].axios.get("/api/getByParentId?id="+t)},count_comment_by_parent_id:function(t){return i["default"].axios.get("/api/countComment?id="+t)},like_width_id:function(t){return i["default"].axios.get("/api/like?id="+t)},get_like_by_id:function(t){return i["default"].axios.get("/api/getLike?id="+t)}});n(1539);function dt(t,e,n){return new Promise((function(i,s){t.then((function(t){t.status?(e.commit(n,t),i(!0)):(e.commit(n,t),s(!1))}),(function(t){s(t)}))}))}function ft(t){return new Promise((function(e,n){t.then((function(t){t.status?e(t):n(t)}),(function(t){n(t)}))}))}var pt={sprayersData:[],sprayersComment:{}},ht={getContentList:function(t,e){t.sprayersData=e.data},addContentList:function(t,e){t.sprayersData=t.sprayersData.concat(e.data)},getCommentById:function(t,e){e.data.length>0&&i["default"].set(t.sprayersComment,e.data[0].parentId,e.data)},addCommentById:function(t,e){var n=t.sprayersComment[e.parentId];n||(n=[]),n.push(e),i["default"].set(t.sprayersComment,e.parentId,n)}},gt={getContentList:function(t,e){var n="getContentList";return null!=e&&e.length>0&&(n="addContentList"),dt(mt.get_content_list(e),t,n)},submitContent:function(t,e){return ft(mt.submit_content(e))},getContentById:function(t,e){return ft(mt.get_content_by_id(e))},getContentByParentId:function(t,e){return dt(mt.get_content_by_parent_id(e),t,"getCommentById")},countCommentByParentId:function(t,e){return ft(mt.count_comment_by_parent_id(e))},likeSubmit:function(t,e){return ft(mt.like_width_id(e))},getLike:function(t,e){return ft(mt.get_like_by_id(e))}},yt={namespaced:!0,actions:gt,state:pt,mutations:ht};i["default"].use(C.ZP);var vt=new C.ZP.Store({debug:!0,state:{message:"every sprayer is create by yourself"},modules:{content:yt}});n(7327);i["default"].filter("dateFormat_y_m_d_hm",(function(t){var e=new Date(t);return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()})),i["default"].config.productionTip=!1,i["default"].use(at.ZP),i["default"].use(rt()),i["default"].use(lt.Z,ct()),vt.dispatch("content/getContentList"),new i["default"]({render:function(t){return t(w)},router:st,store:vt}).$mount("#app")}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,i,s,a){if(!i){var o=1/0;for(l=0;l<t.length;l++){i=t[l][0],s=t[l][1],a=t[l][2];for(var r=!0,u=0;u<i.length;u++)(!1&a||o>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[u])}))?i.splice(u--,1):(r=!1,a<o&&(o=a));if(r){t.splice(l--,1);var c=s();void 0!==c&&(e=c)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[i,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,a,o=i[0],r=i[1],u=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(u)var l=u(n)}for(e&&e(i);c<o.length;c++)a=o[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},i=self["webpackChunksprayers_vue"]=self["webpackChunksprayers_vue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(7103)}));i=n.O(i)})();
//# sourceMappingURL=app-legacy.32f21061.js.map