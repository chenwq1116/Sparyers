(function(){"use strict";var t={103:function(t,e,n){var s=n(144),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",on:{scroll:function(e){return t.handleScroll(e)}}},[n("sprayers-header"),n("sprayers-main")],1)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"main-content"},[n("router-view")],1)])},o=[],u={name:"SprayersMain",data(){return{title_Group:"Group",title_HotTop:"Hot Top",groups:[{name:"china",id:"china"},{name:"guangdong",id:"guangdong"},{name:"zhuhai",id:"zhuhai"},{name:"nfh",id:"nfh"}],hotTops:[{name:"今天核酸了嘛",id:"1"},{name:"今天核酸了嘛",id:"1"},{name:"今天核酸了嘛",id:"1"}]}}},l=u,c=n(1),m=(0,c.Z)(l,r,o,!1,null,null,null),d=m.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"contains header-contains"},[t._m(0),n("div",{staticClass:"contains-right"},[n("div",{staticClass:"menu"},t._l(t.menuRouter,(function(e,s){return n("router-link",{key:s,staticClass:"menu-item",attrs:{to:e.to}},[n("div",[t._v(t._s(e.name))])])})),1)])])])},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contains-left"},[n("img",{attrs:{src:"sprayers.png"}})])}],f={name:"SprayersHeader",data(){return{menuRouter:[{name:"Home🏡",to:"/"}]}}},g=f,y=(0,c.Z)(g,p,h,!1,null,null,null),v=y.exports,_=n(629),C={name:"App",components:{SprayersMain:d,SprayersHeader:v},computed:{...(0,_.rn)({sprayersData:t=>t.content.sprayersData})},data(){return{loadData:!0}},methods:{...(0,_.nv)({getContentList:"content/getContentList"}),handleScroll(t){const{scrollTop:e,clientHeight:n,scrollHeight:s}=t.target;if(e+n>.9*s&&this.loadData){this.loadData=!1;const t=this.sprayersData[this.sprayersData.length-1];this.getContentList(t._id).then((t=>{t&&(this.loadData=!0)}))}}}},b=C,x=(0,c.Z)(b,i,a,!1,null,null,null),k=x.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-home"},[n("div",{staticClass:"content-basic home-top"},[n("sprayers-text-area",{attrs:{submitType:"home"}})],1),t._l(t.sprayersData,(function(t,e){return n("sprayers-box",{key:e,attrs:{sprayersData:t}})}))],2)},S=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic home-textArea"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{maxlength:t.maxLengthLimit},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},function(e){return t.textMsg()}],change:function(e){return t.textMsg()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?t.submitContent():null}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadFiles.length>0,expression:"uploadFiles.length > 0"}],staticClass:"home-img"},t._l(t.uploadFiles,(function(e,s){return n("div",{key:s,staticClass:"img"},[n("img",{staticClass:"img-bottom",attrs:{src:e.data}}),n("img",{staticClass:"imgs-top",attrs:{src:"del.png"},on:{click:function(e){return t.delImg(s)}}})])})),0),n("div",{staticClass:"home-bottom"},["home"==t.submitType?n("div",{staticClass:"home-tool"},[n("div",{staticClass:"tool-btn"},[n("div",{on:{click:function(e){return t.isShowEmoji()}}},[t._v("😃")]),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],on:{select:t.selectEmoji}})],1),n("div",{staticClass:"tool-btn"},[n("input",{staticClass:"input-file",attrs:{type:"file",accept:"image/*",multiple:"true"},on:{change:function(e){return t.getFiles(e)}}}),t._v(" 📷 ")])]):t._e(),"home"!=t.submitType?n("div",{staticClass:"home-tool"},[n("div",{staticClass:"tool-btn"},[n("div",{on:{click:function(e){return t.isShowEmoji()}}},[t._v("😃")]),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],on:{select:t.selectEmoji}})],1)]):t._e(),n("div",{staticClass:"home-send"},[n("div",[t._v(" "+t._s(t.maxlength)+"/120")]),n("button",{staticClass:"comment-btn",attrs:{type:"button"},on:{click:function(e){return t.submitContent()}}},[t._v("🗣")])])])])},E=[],D={name:"SprayersTextArea",props:{submitType:{type:String,default:""},id:{type:String,default:""}},data(){return{message:"",text:"",isEmoji:!1,uploadFiles:[],maxlength:0,maxLengthLimit:120,picturesLengthLimit:9,picturesErrorMsg:"Pictures more than 9",messageErrorMsg:"Message more than 120",picturesSizeLimitErrorMsg:"Pictures more than 10m",uploadSizeLimit:10240}},computed:{isUploadOverSizeLimit(){let t=!1,e=0;const n=this.uploadFiles;let s;for(s in n){const t=n[s];null!=t&&(e+=t.size)}return this.uploadSizeLimit<=e&&(t=!0),t}},methods:{...(0,_.nv)({submitContentActions:"content/submitContent",getContentList:"content/getContentList",getContentByParentId:"content/getContentByParentId"}),...(0,_.OI)({addContentList:"content/addContentList",addCommentById:"content/addCommentById"}),delImg(t){this.uploadFiles.splice(t,1)},selectEmoji(t){this.message+=t.data,this.isEmoji=!1,this.textMsg()},isShowEmoji(){return this.isEmoji?this.isEmoji=!1:this.isEmoji=!0,this.isEmoji},getFiles(t){var e=t.target.files;let n;for(n in e){let t=e[n];var s=new FileReader;s.readAsDataURL(t);let i="",a=this;s.onload=function(){i=this.result.substring(this.result.indexOf(",")+1);var e={name:t.name,data:"data:image/png;base64,"+i};a.uploadFiles.push(e)}}},textMsg(){this.maxlength=this.message.length},submitContent(){const t=this.message.trim();if(console.log(t),t.length<=0)return void alert("Message is Empty");if(this.message.length>this.maxLengthLimit)return void alert(this.messageErrorMsg);if(this.uploadFiles.length>this.picturesLengthLimit)return void alert(this.picturesErrorMsg);if(this.isUploadOverSizeLimit)return void alert(this.picturesSizeLimitErrorMsg);let e={content:this.message,imgs:this.uploadFiles,parentId:this.id,createDate:new Date},n=this;this.submitContentActions(e).then((t=>{t&&(n.id.length>0?n.getContentByParentId(n.id):n.getContentList(),n.message="",n.uploadFiles=[])}))}}},j=D,I=(0,c.Z)(j,L,E,!1,null,null,null),P=I.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic box"},[n("div",{staticClass:"box-content"},[n("p",{staticClass:"content-date"},[t._v(" "+t._s(t._f("dateFormat_y_m_d_hm")(t.sprayersData.createDate))+" ")]),n("p",{staticClass:"content-text"},[t._v(" "+t._s(t.sprayersData.content)+" ")]),n("div",{staticClass:"content-img"},[n("viewer",t._l(t.sprayersData.imgs,(function(t,e){return n("img",{key:e,attrs:{src:t.data}})})),0)],1)]),n("sprayers-comment",{attrs:{id:t.sprayersData._id}})],1)},T=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic"},[n("div",{staticClass:"box-bottom"},[n("div",{class:["bottom-btn","Comment"===t.active?"active":""],on:{click:function(e){return t.isShowComment()}}},[t._v("⌨️ "+t._s(t.countComment))]),n("div",{staticClass:"bottom-btn",on:{click:function(e){return t.likeToSubmit(t.id)}}},[t._v("👍 "+t._s(t.countLike))])]),t.showComment?n("div",{staticClass:"box-comment"},[n("sprayers-text-area",{attrs:{submitType:"Comment"===t.active?"Transmit":"Comment",id:t.id}}),n("div",{staticClass:"comment-list"},t._l(t.sprayersComment[t.id],(function(e,s){return n("p",{key:s,staticClass:"content-list"},[t._v(" "+t._s(t._f("dateFormat_y_m_d_hm")(e.createDate))+": "+t._s(e.content)+" ")])})),0)],1):t._e()])},O=[],F={components:{SprayersTextArea:P},name:"SprayersComment",props:{id:{type:String,default:""}},computed:{...(0,_.rn)({sprayersComment:t=>t.content.sprayersComment})},data(){return{sprayersData:[],showComment:!1,active:"",countComment:0,countLike:0}},created:function(){this.countCommentByParentId(this.id).then((t=>{this.countComment=t.data})),this.getLike(this.id).then((t=>{this.countLike=t.data}))},methods:{...(0,_.nv)({getContentByParentId:"content/getContentByParentId",countCommentByParentId:"content/countCommentByParentId",likeSubmit:"content/likeSubmit",getLike:"content/getLike"}),isShowComment(){return this.active="Comment",this.showComment?(this.active="",this.showComment=!1):(this.id.length>0&&this.getContentByParentId(this.id),this.showComment=!0),this.showComment},likeToSubmit(t){++this.countLike,this.likeSubmit(t)}}},Z=F,$=(0,c.Z)(Z,M,O,!1,null,null,null),z=$.exports,H={components:{SprayersComment:z},name:"SprayersBox",props:["sprayersData"],methods:{toInfo(t){this.$router.push({name:"info",params:{sprayersData:t},query:{id:t._id}})}}},A=H,N=(0,c.Z)(A,B,T,!1,null,null,null),R=N.exports,U={name:"ContentHome",components:{SprayersTextArea:P,SprayersBox:R},computed:{...(0,_.rn)({sprayersData:t=>t.content.sprayersData})},data(){return{}}},q=U,G=(0,c.Z)(q,w,S,!1,null,null,null),V=G.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-basic"},[n("div",{staticClass:"content-info"},[n("div",{staticClass:"box-content",on:{click:function(e){return t.toInfo()}}},[n("p",{staticClass:"content-text"},[t._v(" "+t._s(t.infoData.content)+" ")]),n("div",{staticClass:"content-img"},[n("viewer",t._l(t.infoData.imgs,(function(t,e){return n("img",{key:e,attrs:{src:t.data}})})),0)],1)])]),n("sprayers-comment",{attrs:{sprayersInfo:t.infoData.info}}),t._l(t.sprayersData,(function(e,s){return n("p",{key:s,staticClass:"content-list"},[t._v(" "+t._s(e.content)+" ")])}))],2)},Y=[],J={components:{SprayersComment:z},name:"ContentInfo",data(){return{infoData:this.$route.params.sprayersData,id:this.$route.query.id,sprayersData:[{name:"nick name",date:"Today 23:37",content:"sdfwe"},{name:"nick name",date:"Today 23:37",content:"fskfjkasjfdsajdflkjsdlf"}]}},methods:{...(0,_.nv)({getContentById:"content/getContentById"})}},Q=J,W=(0,c.Z)(Q,K,Y,!1,null,null,null),X=W.exports,tt=n(345);s["default"].use(tt.Z);const et=[{path:"/",name:"home",component:V},{path:"/info",name:"info",component:X}],nt=new tt.Z({routes:et});var st=nt,it=n(784),at=n(273),rt=n.n(at),ot=n(669),ut=n.n(ot),lt=n(346),ct={get_content_list(t){return null==t&&(t=""),s["default"].axios.get("/api/?id="+t)},submit_content(t){return s["default"].axios.post("/api/submit",t)},get_content_by_id(t){return s["default"].axios.get("/api/get?id="+t)},get_content_by_parent_id(t){return s["default"].axios.get("/api/getByParentId?id="+t)},count_comment_by_parent_id(t){return s["default"].axios.get("/api/countComment?id="+t)},like_width_id(t){return s["default"].axios.get("/api/like?id="+t)},get_like_by_id(t){return s["default"].axios.get("/api/getLike?id="+t)}};function mt(t,e,n){return new Promise(((s,i)=>{t.then((t=>{t.status?(e.commit(n,t),s(!0)):(e.commit(n,t),i(!1))}),(t=>{i(t)}))}))}function dt(t){return new Promise(((e,n)=>{t.then((t=>{t.status?e(t):n(t)}),(t=>{n(t)}))}))}const pt={sprayersData:[],sprayersComment:{}},ht={getContentList(t,e){t.sprayersData=e.data},addContentList(t,e){t.sprayersData=t.sprayersData.concat(e.data)},getCommentById(t,e){e.data.length>0&&s["default"].set(t.sprayersComment,e.data[0].parentId,e.data)},addCommentById(t,e){let n=t.sprayersComment[e.parentId];n||(n=[]),n.push(e),s["default"].set(t.sprayersComment,e.parentId,n)}},ft={getContentList(t,e){let n="getContentList";return null!=e&&e.length>0&&(n="addContentList"),mt(ct.get_content_list(e),t,n)},submitContent(t,e){return dt(ct.submit_content(e))},getContentById(t,e){return dt(ct.get_content_by_id(e))},getContentByParentId(t,e){return mt(ct.get_content_by_parent_id(e),t,"getCommentById")},countCommentByParentId(t,e){return dt(ct.count_comment_by_parent_id(e))},likeSubmit(t,e){return dt(ct.like_width_id(e))},getLike(t,e){return dt(ct.get_like_by_id(e))}};var gt={namespaced:!0,actions:ft,state:pt,mutations:ht};s["default"].use(_.ZP);var yt=new _.ZP.Store({debug:!0,state:{message:"every sprayer is create by yourself"},modules:{content:gt}});s["default"].filter("dateFormat_y_m_d_hm",(t=>{const e=new Date(t);return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()})),s["default"].config.productionTip=!1,s["default"].use(it.ZP),s["default"].use(rt()),s["default"].use(lt.Z,ut()),yt.dispatch("content/getContentList"),new s["default"]({render:t=>t(k),router:st,store:yt}).$mount("#app")}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var a=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,s,i,a){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],i=t[c][1],a=t[c][2];for(var o=!0,u=0;u<s.length;u++)(!1&a||r>=a)&&Object.keys(n.O).every((function(t){return n.O[t](s[u])}))?s.splice(u--,1):(o=!1,a<r&&(r=a));if(o){t.splice(c--,1);var l=i();void 0!==l&&(e=l)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,i,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,a,r=s[0],o=s[1],u=s[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(u)var c=u(n)}for(e&&e(s);l<r.length;l++)a=r[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},s=self["webpackChunksprayers_vue"]=self["webpackChunksprayers_vue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(103)}));s=n.O(s)})();
//# sourceMappingURL=app.ae18564d.js.map